{% extends "regression.html" %}
{% block regression_content %}
<div class="container mt-4">
  <h4 class="text-info mb-3"><i class="bi bi-bar-chart"></i> Target-wise Feature Distribution</h4>

  {% if error %}
  <div class="alert alert-danger">{{ error }}</div>
  {% endif %}
  {% if success %}
  <div class="alert alert-success">{{ success }}</div>
  {% endif %}

  <form method="post" action="/regression/categories" class="p-4 bg-dark border border-info rounded shadow-sm">
    <div class="row mb-3">
      <div class="col-md-4">
        <label class="form-label text-light">ðŸŽ¯ Target Column (Numeric)</label>
        <select name="target_column" class="form-select" required>
          {% for col in numeric_columns %}
          <option value="{{ col }}" {% if col == selected_target %}selected{% endif %}>{{ col }}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-3">
        <label class="form-label text-light">Q1 Percentile (%)</label>
        <input type="number" name="lower_percentile" value="25" class="form-control" min="0" max="100" step="1" required>
      </div>

      <div class="col-md-3">
        <label class="form-label text-light">Q3 Percentile (%)</label>
        <input type="number" name="upper_percentile" value="75" class="form-control" min="0" max="100" step="1" required>
      </div>

      <div class="col-md-2 d-grid">
        <label class="form-label text-light invisible">.</label>
        <button type="submit" class="btn btn-outline-info">Generate</button>
      </div>
    </div>

    <label class="form-label text-light mb-2">ðŸ§® Feature Columns</label>
    <div class="row">
      {% for col in columns %}
      <div class="col-md-3 mb-1">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="selected_features" value="{{ col }}"
                 {% if selected_features and col in selected_features %}checked{% endif %}>
          <label class="form-check-label text-light">{{ col }}</label>
        </div>
      </div>
      {% endfor %}
    </div>
  </form>

  {% if plots %}
  <hr class="mt-4">
  <h5 class="text-light mb-3">ðŸ“Š Comparison Plots</h5>
  {% for plot in plots %}
  <div class="mb-4">
    <iframe src="{{ plot }}" class="w-100 border rounded shadow-sm" style="height:500px;"></iframe>
  </div>
  {% endfor %}
  {% endif %}
</div>
{% endblock %}
